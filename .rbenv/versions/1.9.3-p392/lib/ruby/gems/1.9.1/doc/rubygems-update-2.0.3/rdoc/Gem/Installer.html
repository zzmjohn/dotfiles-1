<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Gem::Installer</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/rubygems/installer_test_case_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rubygems/installer_test_case.rb">lib/rubygems/installer_test_case.rb</a></li>
          
            <li><a href="../lib/rubygems/installer_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rubygems/installer.rb">lib/rubygems/installer.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../Object.html">Object</a></p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="Installer/ExtensionBuildError.html">Gem::Installer::ExtensionBuildError</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-exec_format">::exec_format</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-app_script_text">#app_script_text</a></li>
          
          <li><a href="#method-i-build_extensions">#build_extensions</a></li>
          
          <li><a href="#method-i-check_that_user_bin_dir_is_in_path">#check_that_user_bin_dir_is_in_path</a></li>
          
          <li><a href="#method-i-dir">#dir</a></li>
          
          <li><a href="#method-i-ensure_dependencies_met">#ensure_dependencies_met</a></li>
          
          <li><a href="#method-i-ensure_dependency">#ensure_dependency</a></li>
          
          <li><a href="#method-i-ensure_loadable_spec">#ensure_loadable_spec</a></li>
          
          <li><a href="#method-i-ensure_required_ruby_version_met">#ensure_required_ruby_version_met</a></li>
          
          <li><a href="#method-i-ensure_required_rubygems_version_met">#ensure_required_rubygems_version_met</a></li>
          
          <li><a href="#method-i-extension_build_error">#extension_build_error</a></li>
          
          <li><a href="#method-i-extract_files">#extract_files</a></li>
          
          <li><a href="#method-i-formatted_program_filename">#formatted_program_filename</a></li>
          
          <li><a href="#method-i-gem_dir">#gem_dir</a></li>
          
          <li><a href="#method-i-generate_bin">#generate_bin</a></li>
          
          <li><a href="#method-i-generate_bin_script">#generate_bin_script</a></li>
          
          <li><a href="#method-i-generate_bin_symlink">#generate_bin_symlink</a></li>
          
          <li><a href="#method-i-generate_windows_script">#generate_windows_script</a></li>
          
          <li><a href="#method-i-install">#install</a></li>
          
          <li><a href="#method-i-installation_satisfies_dependency-3F">#installation_satisfies_dependency?</a></li>
          
          <li><a href="#method-i-installed_specs">#installed_specs</a></li>
          
          <li><a href="#method-i-pre_install_checks">#pre_install_checks</a></li>
          
          <li><a href="#method-i-process_options">#process_options</a></li>
          
          <li><a href="#method-i-shebang">#shebang</a></li>
          
          <li><a href="#method-i-spec">#spec</a></li>
          
          <li><a href="#method-i-spec_file">#spec_file</a></li>
          
          <li><a href="#method-i-unpack">#unpack</a></li>
          
          <li><a href="#method-i-verify_gem_home">#verify_gem_home</a></li>
          
          <li><a href="#method-i-windows_stub_script">#windows_stub_script</a></li>
          
          <li><a href="#method-i-write_build_info_file">#write_build_info_file</a></li>
          
          <li><a href="#method-i-write_cache_file">#write_cache_file</a></li>
          
          <li><a href="#method-i-write_spec">#write_spec</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="UserInteraction.html">Gem::UserInteraction</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../LICENSE_txt.html">LICENSE.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Gem.html">Gem</a></li>
        
          <li><a href="../Gem/AvailableSet.html">Gem::AvailableSet</a></li>
        
          <li><a href="../Gem/Command.html">Gem::Command</a></li>
        
          <li><a href="../Gem/CommandLineError.html">Gem::CommandLineError</a></li>
        
          <li><a href="../Gem/CommandManager.html">Gem::CommandManager</a></li>
        
          <li><a href="../Gem/Commands.html">Gem::Commands</a></li>
        
          <li><a href="../Gem/Commands/BuildCommand.html">Gem::Commands::BuildCommand</a></li>
        
          <li><a href="../Gem/Commands/CertCommand.html">Gem::Commands::CertCommand</a></li>
        
          <li><a href="../Gem/Commands/CheckCommand.html">Gem::Commands::CheckCommand</a></li>
        
          <li><a href="../Gem/Commands/CleanupCommand.html">Gem::Commands::CleanupCommand</a></li>
        
          <li><a href="../Gem/Commands/ContentsCommand.html">Gem::Commands::ContentsCommand</a></li>
        
          <li><a href="../Gem/Commands/DependencyCommand.html">Gem::Commands::DependencyCommand</a></li>
        
          <li><a href="../Gem/Commands/EnvironmentCommand.html">Gem::Commands::EnvironmentCommand</a></li>
        
          <li><a href="../Gem/Commands/FetchCommand.html">Gem::Commands::FetchCommand</a></li>
        
          <li><a href="../Gem/Commands/GenerateIndexCommand.html">Gem::Commands::GenerateIndexCommand</a></li>
        
          <li><a href="../Gem/Commands/HelpCommand.html">Gem::Commands::HelpCommand</a></li>
        
          <li><a href="../Gem/Commands/InstallCommand.html">Gem::Commands::InstallCommand</a></li>
        
          <li><a href="../Gem/Commands/ListCommand.html">Gem::Commands::ListCommand</a></li>
        
          <li><a href="../Gem/Commands/LockCommand.html">Gem::Commands::LockCommand</a></li>
        
          <li><a href="../Gem/Commands/MirrorCommand.html">Gem::Commands::MirrorCommand</a></li>
        
          <li><a href="../Gem/Commands/OutdatedCommand.html">Gem::Commands::OutdatedCommand</a></li>
        
          <li><a href="../Gem/Commands/OwnerCommand.html">Gem::Commands::OwnerCommand</a></li>
        
          <li><a href="../Gem/Commands/PristineCommand.html">Gem::Commands::PristineCommand</a></li>
        
          <li><a href="../Gem/Commands/PushCommand.html">Gem::Commands::PushCommand</a></li>
        
          <li><a href="../Gem/Commands/QueryCommand.html">Gem::Commands::QueryCommand</a></li>
        
          <li><a href="../Gem/Commands/RdocCommand.html">Gem::Commands::RdocCommand</a></li>
        
          <li><a href="../Gem/Commands/SearchCommand.html">Gem::Commands::SearchCommand</a></li>
        
          <li><a href="../Gem/Commands/ServerCommand.html">Gem::Commands::ServerCommand</a></li>
        
          <li><a href="../Gem/Commands/SetupCommand.html">Gem::Commands::SetupCommand</a></li>
        
          <li><a href="../Gem/Commands/SourcesCommand.html">Gem::Commands::SourcesCommand</a></li>
        
          <li><a href="../Gem/Commands/SpecificationCommand.html">Gem::Commands::SpecificationCommand</a></li>
        
          <li><a href="../Gem/Commands/StaleCommand.html">Gem::Commands::StaleCommand</a></li>
        
          <li><a href="../Gem/Commands/UninstallCommand.html">Gem::Commands::UninstallCommand</a></li>
        
          <li><a href="../Gem/Commands/UnpackCommand.html">Gem::Commands::UnpackCommand</a></li>
        
          <li><a href="../Gem/Commands/UpdateCommand.html">Gem::Commands::UpdateCommand</a></li>
        
          <li><a href="../Gem/Commands/WhichCommand.html">Gem::Commands::WhichCommand</a></li>
        
          <li><a href="../Gem/Commands/YankCommand.html">Gem::Commands::YankCommand</a></li>
        
          <li><a href="../Gem/ConfigFile.html">Gem::ConfigFile</a></li>
        
          <li><a href="../Gem/ConsoleUI.html">Gem::ConsoleUI</a></li>
        
          <li><a href="../Gem/DefaultUserInteraction.html">Gem::DefaultUserInteraction</a></li>
        
          <li><a href="../Gem/Dependency.html">Gem::Dependency</a></li>
        
          <li><a href="../Gem/DependencyError.html">Gem::DependencyError</a></li>
        
          <li><a href="../Gem/DependencyInstaller.html">Gem::DependencyInstaller</a></li>
        
          <li><a href="../Gem/DependencyList.html">Gem::DependencyList</a></li>
        
          <li><a href="../Gem/DependencyRemovalException.html">Gem::DependencyRemovalException</a></li>
        
          <li><a href="../Gem/DependencyResolutionError.html">Gem::DependencyResolutionError</a></li>
        
          <li><a href="../Gem/DependencyResolver.html">Gem::DependencyResolver</a></li>
        
          <li><a href="../Gem/DependencyResolver/APISet.html">Gem::DependencyResolver::APISet</a></li>
        
          <li><a href="../Gem/DependencyResolver/APISpecification.html">Gem::DependencyResolver::APISpecification</a></li>
        
          <li><a href="../Gem/DependencyResolver/ActivationRequest.html">Gem::DependencyResolver::ActivationRequest</a></li>
        
          <li><a href="../Gem/DependencyResolver/CurrentSet.html">Gem::DependencyResolver::CurrentSet</a></li>
        
          <li><a href="../Gem/DependencyResolver/DependencyConflict.html">Gem::DependencyResolver::DependencyConflict</a></li>
        
          <li><a href="../Gem/DependencyResolver/DependencyRequest.html">Gem::DependencyResolver::DependencyRequest</a></li>
        
          <li><a href="../Gem/DependencyResolver/IndexSet.html">Gem::DependencyResolver::IndexSet</a></li>
        
          <li><a href="../Gem/DependencyResolver/IndexSpecification.html">Gem::DependencyResolver::IndexSpecification</a></li>
        
          <li><a href="../Gem/Deprecate.html">Gem::Deprecate</a></li>
        
          <li><a href="../Gem/Doctor.html">Gem::Doctor</a></li>
        
          <li><a href="../Gem/DocumentError.html">Gem::DocumentError</a></li>
        
          <li><a href="../Gem/EndOfYAMLException.html">Gem::EndOfYAMLException</a></li>
        
          <li><a href="../Gem/ErrorReason.html">Gem::ErrorReason</a></li>
        
          <li><a href="../Gem/Exception.html">Gem::Exception</a></li>
        
          <li><a href="../Gem/Ext.html">Gem::Ext</a></li>
        
          <li><a href="../Gem/Ext/Builder.html">Gem::Ext::Builder</a></li>
        
          <li><a href="../Gem/Ext/CmakeBuilder.html">Gem::Ext::CmakeBuilder</a></li>
        
          <li><a href="../Gem/Ext/ConfigureBuilder.html">Gem::Ext::ConfigureBuilder</a></li>
        
          <li><a href="../Gem/Ext/ExtConfBuilder.html">Gem::Ext::ExtConfBuilder</a></li>
        
          <li><a href="../Gem/Ext/RakeBuilder.html">Gem::Ext::RakeBuilder</a></li>
        
          <li><a href="../Gem/FakeFetcher.html">Gem::FakeFetcher</a></li>
        
          <li><a href="../Gem/FilePermissionError.html">Gem::FilePermissionError</a></li>
        
          <li><a href="../Gem/FormatException.html">Gem::FormatException</a></li>
        
          <li><a href="../Gem/GemNotFoundException.html">Gem::GemNotFoundException</a></li>
        
          <li><a href="../Gem/GemNotInHomeException.html">Gem::GemNotInHomeException</a></li>
        
          <li><a href="../Gem/GemRunner.html">Gem::GemRunner</a></li>
        
          <li><a href="../Gem/GemcutterUtilities.html">Gem::GemcutterUtilities</a></li>
        
          <li><a href="../Gem/ImpossibleDependenciesError.html">Gem::ImpossibleDependenciesError</a></li>
        
          <li><a href="../Gem/Indexer.html">Gem::Indexer</a></li>
        
          <li><a href="../Gem/InstallError.html">Gem::InstallError</a></li>
        
          <li><a href="../Gem/InstallUpdateOptions.html">Gem::InstallUpdateOptions</a></li>
        
          <li><a href="../Gem/Installer.html">Gem::Installer</a></li>
        
          <li><a href="../Gem/Installer/ExtensionBuildError.html">Gem::Installer::ExtensionBuildError</a></li>
        
          <li><a href="../Gem/InstallerTestCase.html">Gem::InstallerTestCase</a></li>
        
          <li><a href="../Gem/InvalidSpecificationException.html">Gem::InvalidSpecificationException</a></li>
        
          <li><a href="../Gem/LoadError.html">Gem::LoadError</a></li>
        
          <li><a href="../Gem/LocalRemoteOptions.html">Gem::LocalRemoteOptions</a></li>
        
          <li><a href="../Gem/MockGemUi.html">Gem::MockGemUi</a></li>
        
          <li><a href="../Gem/MockGemUi/InputEOFError.html">Gem::MockGemUi::InputEOFError</a></li>
        
          <li><a href="../Gem/MockGemUi/SystemExitException.html">Gem::MockGemUi::SystemExitException</a></li>
        
          <li><a href="../Gem/MockGemUi/TTY.html">Gem::MockGemUi::TTY</a></li>
        
          <li><a href="../Gem/MockGemUi/TermError.html">Gem::MockGemUi::TermError</a></li>
        
          <li><a href="../Gem/NameTuple.html">Gem::NameTuple</a></li>
        
          <li><a href="../Gem/NoAliasYAMLTree.html">Gem::NoAliasYAMLTree</a></li>
        
          <li><a href="../Gem/OperationNotSupportedError.html">Gem::OperationNotSupportedError</a></li>
        
          <li><a href="../Gem/Package.html">Gem::Package</a></li>
        
          <li><a href="../Gem/Package/DigestIO.html">Gem::Package::DigestIO</a></li>
        
          <li><a href="../Gem/Package/Error.html">Gem::Package::Error</a></li>
        
          <li><a href="../Gem/Package/FormatError.html">Gem::Package::FormatError</a></li>
        
          <li><a href="../Gem/Package/NonSeekableIO.html">Gem::Package::NonSeekableIO</a></li>
        
          <li><a href="../Gem/Package/Old.html">Gem::Package::Old</a></li>
        
          <li><a href="../Gem/Package/PathError.html">Gem::Package::PathError</a></li>
        
          <li><a href="../Gem/Package/TarHeader.html">Gem::Package::TarHeader</a></li>
        
          <li><a href="../Gem/Package/TarInvalidError.html">Gem::Package::TarInvalidError</a></li>
        
          <li><a href="../Gem/Package/TarReader.html">Gem::Package::TarReader</a></li>
        
          <li><a href="../Gem/Package/TarReader/Entry.html">Gem::Package::TarReader::Entry</a></li>
        
          <li><a href="../Gem/Package/TarReader/UnexpectedEOF.html">Gem::Package::TarReader::UnexpectedEOF</a></li>
        
          <li><a href="../Gem/Package/TarTestCase.html">Gem::Package::TarTestCase</a></li>
        
          <li><a href="../Gem/Package/TarWriter.html">Gem::Package::TarWriter</a></li>
        
          <li><a href="../Gem/Package/TarWriter/BoundedStream.html">Gem::Package::TarWriter::BoundedStream</a></li>
        
          <li><a href="../Gem/Package/TarWriter/FileOverflow.html">Gem::Package::TarWriter::FileOverflow</a></li>
        
          <li><a href="../Gem/Package/TarWriter/RestrictedStream.html">Gem::Package::TarWriter::RestrictedStream</a></li>
        
          <li><a href="../Gem/Package/TooLongFileName.html">Gem::Package::TooLongFileName</a></li>
        
          <li><a href="../Gem/PackageTask.html">Gem::PackageTask</a></li>
        
          <li><a href="../Gem/PathSupport.html">Gem::PathSupport</a></li>
        
          <li><a href="../Gem/Platform.html">Gem::Platform</a></li>
        
          <li><a href="../Gem/PlatformMismatch.html">Gem::PlatformMismatch</a></li>
        
          <li><a href="../Gem/RDoc.html">Gem::RDoc</a></li>
        
          <li><a href="../Gem/RemoteError.html">Gem::RemoteError</a></li>
        
          <li><a href="../Gem/RemoteFetcher.html">Gem::RemoteFetcher</a></li>
        
          <li><a href="../Gem/RemoteFetcher/FetchError.html">Gem::RemoteFetcher::FetchError</a></li>
        
          <li><a href="../Gem/RemoteFetcher/UnknownHostError.html">Gem::RemoteFetcher::UnknownHostError</a></li>
        
          <li><a href="../Gem/RemoteInstallationCancelled.html">Gem::RemoteInstallationCancelled</a></li>
        
          <li><a href="../Gem/RemoteInstallationSkipped.html">Gem::RemoteInstallationSkipped</a></li>
        
          <li><a href="../Gem/RemoteSourceException.html">Gem::RemoteSourceException</a></li>
        
          <li><a href="../Gem/RequestSet.html">Gem::RequestSet</a></li>
        
          <li><a href="../Gem/RequestSet/GemDepedencyAPI.html">Gem::RequestSet::GemDepedencyAPI</a></li>
        
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          <li><a href="../Gem/Requirement/BadRequirementError.html">Gem::Requirement::BadRequirementError</a></li>
        
          <li><a href="../Gem/Security.html">Gem::Security</a></li>
        
          <li><a href="../Gem/Security/Exception.html">Gem::Security::Exception</a></li>
        
          <li><a href="../Gem/Security/Policy.html">Gem::Security::Policy</a></li>
        
          <li><a href="../Gem/Security/Signer.html">Gem::Security::Signer</a></li>
        
          <li><a href="../Gem/Security/TrustDir.html">Gem::Security::TrustDir</a></li>
        
          <li><a href="../Gem/Server.html">Gem::Server</a></li>
        
          <li><a href="../Gem/SilentUI.html">Gem::SilentUI</a></li>
        
          <li><a href="../Gem/Source.html">Gem::Source</a></li>
        
          <li><a href="../Gem/Source/Local.html">Gem::Source::Local</a></li>
        
          <li><a href="../Gem/Source/SpecificFile.html">Gem::Source::SpecificFile</a></li>
        
          <li><a href="../Gem/SourceFetchProblem.html">Gem::SourceFetchProblem</a></li>
        
          <li><a href="../Gem/SourceList.html">Gem::SourceList</a></li>
        
          <li><a href="../Gem/SpecFetcher.html">Gem::SpecFetcher</a></li>
        
          <li><a href="../Gem/SpecificGemNotFoundException.html">Gem::SpecificGemNotFoundException</a></li>
        
          <li><a href="../Gem/Specification.html">Gem::Specification</a></li>
        
          <li><a href="../Gem/StreamUI.html">Gem::StreamUI</a></li>
        
          <li><a href="../Gem/StreamUI/SilentDownloadReporter.html">Gem::StreamUI::SilentDownloadReporter</a></li>
        
          <li><a href="../Gem/StreamUI/SilentProgressReporter.html">Gem::StreamUI::SilentProgressReporter</a></li>
        
          <li><a href="../Gem/StreamUI/SimpleProgressReporter.html">Gem::StreamUI::SimpleProgressReporter</a></li>
        
          <li><a href="../Gem/StreamUI/VerboseDownloadReporter.html">Gem::StreamUI::VerboseDownloadReporter</a></li>
        
          <li><a href="../Gem/StreamUI/VerboseProgressReporter.html">Gem::StreamUI::VerboseProgressReporter</a></li>
        
          <li><a href="../Gem/SystemExitException.html">Gem::SystemExitException</a></li>
        
          <li><a href="../Gem/TestCase.html">Gem::TestCase</a></li>
        
          <li><a href="../Gem/TestCase/StaticSet.html">Gem::TestCase::StaticSet</a></li>
        
          <li><a href="../Gem/Text.html">Gem::Text</a></li>
        
          <li><a href="../Gem/Uninstaller.html">Gem::Uninstaller</a></li>
        
          <li><a href="../Gem/UnsatisfiableDepedencyError.html">Gem::UnsatisfiableDepedencyError</a></li>
        
          <li><a href="../Gem/UserInteraction.html">Gem::UserInteraction</a></li>
        
          <li><a href="../Gem/Validator.html">Gem::Validator</a></li>
        
          <li><a href="../Gem/VerificationError.html">Gem::VerificationError</a></li>
        
          <li><a href="../Gem/Version.html">Gem::Version</a></li>
        
          <li><a href="../Gem/VersionOption.html">Gem::VersionOption</a></li>
        
          <li><a href="../OpenSSL.html">OpenSSL</a></li>
        
          <li><a href="../OpenSSL/Digest.html">OpenSSL::Digest</a></li>
        
          <li><a href="../OpenSSL/Digest/SHA1.html">OpenSSL::Digest::SHA1</a></li>
        
          <li><a href="../OpenSSL/Digest/SHA1.html">OpenSSL::Digest::SHA1</a></li>
        
          <li><a href="../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
        
          <li><a href="../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          <li><a href="../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          <li><a href="../Psych.html">Psych</a></li>
        
          <li><a href="../Psych/PrivateType.html">Psych::PrivateType</a></li>
        
          <li><a href="../GemGauntlet.html">GemGauntlet</a></li>
        
          <li><a href="../Kernel.html">Kernel</a></li>
        
          <li><a href="../Object.html">Object</a></li>
        
          <li><a href="../TempIO.html">TempIO</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Gem::Installer</h1>

    <div id="description" class="description">
      
<p>The installer installs the files contained in the .gem into the Gem.home.</p>

<p><a href="Installer.html">Gem::Installer</a> does the work of putting files
in all the right places on the filesystem including unpacking the gem into
its gem dir, installing the gemspec in the specifications dir, storing the
cached gem in the cache dir, and installing either wrappers or symlinks for
executables.</p>

<p>The installer invokes pre and post install hooks.  Hooks can be added
either through a rubygems_plugin.rb file in an installed gem or via a
rubygems/defaults/#{RUBY_ENGINE}.rb or
rubygems/defaults/operating_system.rb file.  See <a
href="../Gem.html#method-c-pre_install">Gem.pre_install</a> and <a
href="../Gem.html#method-c-post_install">Gem.post_install</a> for details.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="ENV_PATHS">ENV_PATHS</a></dt>
          
          <dd class="description"><p>Paths where env(1) might live.  Some systems are broken and have it in /bin</p></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="exec_format-attribute-method" class="method-detail">
          <a name="exec_format"></a>
          
          <a name="exec_format="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">exec_format</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>DOC: Missing docs or :nodoc:.</p>
          
          </div>
        </div>
        
        <div id="path_warning-attribute-method" class="method-detail">
          <a name="path_warning"></a>
          
          <a name="path_warning="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">path_warning</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>True if we’ve warned about PATH not including <a
href="../Gem.html#method-c-bindir">Gem.bindir</a></p>
          
          </div>
        </div>
        
        <div id="bin_dir-attribute-method" class="method-detail">
          <a name="bin_dir"></a>
          
          <a name="bin_dir="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">bin_dir</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="build_args-attribute-method" class="method-detail">
          <a name="build_args"></a>
          
          <a name="build_args="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">build_args</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="env_shebang-attribute-method" class="method-detail">
          <a name="env_shebang"></a>
          
          <a name="env_shebang="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">env_shebang</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="force-attribute-method" class="method-detail">
          <a name="force"></a>
          
          <a name="force="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">force</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="format-attribute-method" class="method-detail">
          <a name="format"></a>
          
          <a name="format="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">format</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="format_executable-attribute-method" class="method-detail">
          <a name="format_executable"></a>
          
          <a name="format_executable="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">format_executable</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="gem-attribute-method" class="method-detail">
          <a name="gem"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">gem</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>DOC: Missing docs or :nodoc:.</p>
          
          </div>
        </div>
        
        <div id="gem_dir-attribute-method" class="method-detail">
          <a name="gem_dir"></a>
          
          <a name="gem_dir="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">gem_dir</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="gem_home-attribute-method" class="method-detail">
          <a name="gem_home"></a>
          
          <a name="gem_home="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">gem_home</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="ignore_dependencies-attribute-method" class="method-detail">
          <a name="ignore_dependencies"></a>
          
          <a name="ignore_dependencies="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">ignore_dependencies</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="options-attribute-method" class="method-detail">
          <a name="options"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">options</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>The options passed when the <a href="Installer.html">Gem::Installer</a> was
instantiated.</p>
          
          </div>
        </div>
        
        <div id="security_policy-attribute-method" class="method-detail">
          <a name="security_policy"></a>
          
          <a name="security_policy="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">security_policy</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="spec-attribute-method" class="method-detail">
          <a name="spec"></a>
          
          <a name="spec="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">spec</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
        <div id="wrappers-attribute-method" class="method-detail">
          <a name="wrappers"></a>
          
          <a name="wrappers="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">wrappers</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          <p>Available through requiring rubygems/installer_test_case</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="exec_format-method" class="method-detail ">
          <a name="method-c-exec_format"></a>

          
          <div class="method-heading">
            <span class="method-name">exec_format</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Defaults to use Ruby’s program prefix and suffix.</p>
            

            
            <div class="method-source-code" id="exec_format-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec_format</span>
  <span class="ruby-ivar">@exec_format</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">default_exec_format</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- exec_format-source -->
            
          </div>

          

          
        </div><!-- exec_format-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(gem, options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Constructs an <a href="Installer.html">Installer</a> instance that will
install the gem located at <tt>gem</tt>.  <tt>options</tt> is a Hash with
the following keys:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-bin_dir">bin_dir</a></p></td>
<td>
<p>Where to put a bin wrapper if needed.</p>
</td></tr><tr><td class="rdoc-term"><p>:development</p></td>
<td>
<p>Whether or not development dependencies should be installed.</p>
</td></tr><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-env_shebang">env_shebang</a></p></td>
<td>
<p>Use /usr/bin/env in bin wrappers.</p>
</td></tr><tr><td class="rdoc-term"><p>:force</p></td>
<td>
<p>Overrides all version checks and security policy checks, except for a
signed-gems-only policy.</p>
</td></tr><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-format_executable">format_executable</a></p></td>
<td>
<p>Format the executable the same as the ruby executable. If your ruby is
ruby18, foo_exec will be installed as foo_exec18.</p>
</td></tr><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-ignore_dependencies">ignore_dependencies</a></p></td>
<td>
<p>Don’t raise if a dependency is missing.</p>
</td></tr><tr><td class="rdoc-term"><p>:install_dir</p></td>
<td>
<p>The directory to install the gem into.</p>
</td></tr><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-security_policy">security_policy</a></p></td>
<td>
<p>Use the specified security policy.  See <a
href="Security.html">Gem::Security</a></p>
</td></tr><tr><td class="rdoc-term"><p>:user_install</p></td>
<td>
<p>Indicate that the gem should be unpacked into the users personal gem
directory.</p>
</td></tr><tr><td class="rdoc-term"><p>:only_install_dir</p></td>
<td>
<p>Only validate dependencies against what is in the install_dir</p>
</td></tr><tr><td class="rdoc-term"><p>:wrappers</p></td>
<td>
<p>Install wrappers if true, symlinks if false.</p>
</td></tr><tr><td class="rdoc-term"><p>:<a href="Installer.html#attribute-i-build_args">build_args</a></p></td>
<td>
<p>An Array of arguments to pass to the extension builder process. If not set,
then <a href="Command.html#method-c-build_args">Gem::Command.build_args</a>
is used</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">gem</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-identifier">require</span> <span class="ruby-string">'fileutils'</span>

  <span class="ruby-ivar">@gem</span> = <span class="ruby-identifier">gem</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
  <span class="ruby-ivar">@package</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Package</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@gem</span>

  <span class="ruby-identifier">process_options</span>

  <span class="ruby-ivar">@package</span>.<span class="ruby-identifier">security_policy</span> = <span class="ruby-ivar">@security_policy</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:user_install</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:unpack</span>] <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@gem_home</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">user_dir</span>
    <span class="ruby-ivar">@bin_dir</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">bindir</span> <span class="ruby-identifier">gem_home</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:bin_dir</span>]
    <span class="ruby-identifier">check_that_user_bin_dir_is_in_path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="app_script_text-method" class="method-detail ">
          <a name="method-i-app_script_text"></a>

          
          <div class="method-heading">
            <span class="method-name">app_script_text</span><span
              class="method-args">(bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return the text for an application file.</p>
            

            
            <div class="method-source-code" id="app_script_text-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 592</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">app_script_text</span>(<span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">#{shebang bin_file_name}## This file was generated by RubyGems.## The application '#{spec.name}' is installed as part of a gem, and# this file is here to facilitate running it.#require 'rubygems'version = &quot;#{Gem::Requirement.default}&quot;if ARGV.first  str = ARGV.first  str = str.dup.force_encoding(&quot;BINARY&quot;) if str.respond_to? :force_encoding  if str =~ /\\A_(.*)_\\z/    version = $1    ARGV.shift  endendgem '#{spec.name}', versionload Gem.bin_path('#{spec.name}', '#{bin_file_name}', version)</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- app_script_text-source -->
            
          </div>

          

          
        </div><!-- app_script_text-method -->

      
        <div id="build_extensions-method" class="method-detail ">
          <a name="method-i-build_extensions"></a>

          
          <div class="method-heading">
            <span class="method-name">build_extensions</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Builds extensions.  Valid types of extensions are extconf.rb files,
configure scripts and rakefiles or mkrf_conf files.</p>
            

            
            <div class="method-source-code" id="build_extensions-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 639</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_extensions</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@build_args</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Building native extensions.  This could take a while...&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Building native extensions with: '#{@build_args.join(' ')}'&quot;</span>
    <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;This could take a while...&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">dest_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_dir</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">ran_rake</span> = <span class="ruby-keyword">false</span> <span class="ruby-comment"># only run rake once</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">extensions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">extension</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ran_rake</span>
    <span class="ruby-identifier">results</span> = []

    <span class="ruby-identifier">extension</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">extension_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_dir</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">extension</span>)

    <span class="ruby-identifier">builder</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">extension</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/extconf/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">ExtConfBuilder</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/configure/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigureBuilder</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/rakefile/</span>, <span class="ruby-regexp">/mkrf_conf/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-identifier">ran_rake</span> = <span class="ruby-keyword">true</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">RakeBuilder</span>
              <span class="ruby-keyword">when</span> <span class="ruby-regexp">/CMakeLists.txt/</span> <span class="ruby-keyword">then</span>
                <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Ext</span><span class="ruby-operator">::</span><span class="ruby-constant">CmakeBuilder</span>
              <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;No builder for extension '#{extension}'&quot;</span>
                <span class="ruby-identifier">extension_build_error</span> <span class="ruby-identifier">extension_dir</span>, <span class="ruby-identifier">message</span>
              <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dest_path</span>

      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">extension_dir</span> <span class="ruby-keyword">do</span>
        <span class="ruby-identifier">results</span> = <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">extension</span>, <span class="ruby-identifier">gem_dir</span>, <span class="ruby-identifier">dest_path</span>,
                                <span class="ruby-identifier">results</span>, <span class="ruby-ivar">@build_args</span>)

        <span class="ruby-identifier">say</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">extension_build_error</span>(<span class="ruby-identifier">extension_dir</span>, <span class="ruby-identifier">results</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>), <span class="ruby-identifier">$@</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- build_extensions-source -->
            
          </div>

          

          
        </div><!-- build_extensions-method -->

      
        <div id="check_that_user_bin_dir_is_in_path-method" class="method-detail ">
          <a name="method-i-check_that_user_bin_dir_is_in_path"></a>

          
          <div class="method-heading">
            <span class="method-name">check_that_user_bin_dir_is_in_path</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="check_that_user_bin_dir_is_in_path-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 563</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_that_user_bin_dir_is_in_path</span>
  <span class="ruby-identifier">user_bin_dir</span> = <span class="ruby-ivar">@bin_dir</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">bindir</span>(<span class="ruby-identifier">gem_home</span>)
  <span class="ruby-identifier">user_bin_dir</span> = <span class="ruby-identifier">user_bin_dir</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">SEPARATOR</span>, <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>) <span class="ruby-keyword">if</span>
    <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span>

  <span class="ruby-identifier">path</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">'PATH'</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">downcase</span>
    <span class="ruby-identifier">user_bin_dir</span> = <span class="ruby-identifier">user_bin_dir</span>.<span class="ruby-identifier">downcase</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">PATH_SEPARATOR</span>).<span class="ruby-identifier">include?</span> <span class="ruby-identifier">user_bin_dir</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">path_warning</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">alert_warning</span> <span class="ruby-node">&quot;You don't have #{user_bin_dir} in your PATH,\n\t  gem executables will not run.&quot;</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">path_warning</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- check_that_user_bin_dir_is_in_path-source -->
            
          </div>

          

          
        </div><!-- check_that_user_bin_dir_is_in_path-method -->

      
        <div id="dir-method" class="method-detail ">
          <a name="method-i-dir"></a>

          
          <div class="method-heading">
            <span class="method-name">dir</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return the target directory where the gem is to be installed. This
directory is not guaranteed to be populated.</p>
            

            
            <div class="method-source-code" id="dir-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 735</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dir</span>
  <span class="ruby-identifier">gem_dir</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- dir-source -->
            
          </div>

          

          
        </div><!-- dir-method -->

      
        <div id="ensure_dependencies_met-method" class="method-detail ">
          <a name="method-i-ensure_dependencies_met"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_dependencies_met</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="ensure_dependencies_met-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 525</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_dependencies_met</span>
  <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">runtime_dependencies</span>
  <span class="ruby-identifier">deps</span> <span class="ruby-operator">|=</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">development_dependencies</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@development</span>

  <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep_gem</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">ensure_dependency</span> <span class="ruby-identifier">spec</span>, <span class="ruby-identifier">dep_gem</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ensure_dependencies_met-source -->
            
          </div>

          

          
        </div><!-- ensure_dependencies_met-method -->

      
        <div id="ensure_dependency-method" class="method-detail ">
          <a name="method-i-ensure_dependency"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_dependency</span><span
              class="method-args">(spec, dependency)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Ensure that the dependency is satisfied by the current installation of gem.
If it is not an exception is raised.</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>spec       </p></td>
<td>
<p><a href="Specification.html">Gem::Specification</a></p>
</td></tr><tr><td class="rdoc-term"><p>dependency </p></td>
<td>
<p><a href="Dependency.html">Gem::Dependency</a></p>
</td></tr></table>
            

            
            <div class="method-source-code" id="ensure_dependency-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 297</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_dependency</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">dependency</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">installation_satisfies_dependency?</span> <span class="ruby-identifier">dependency</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;#{spec.name} requires #{dependency}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ensure_dependency-source -->
            
          </div>

          

          
        </div><!-- ensure_dependency-method -->

      
        <div id="ensure_loadable_spec-method" class="method-detail ">
          <a name="method-i-ensure_loadable_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_loadable_spec</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Ensures the <a href="Specification.html">Gem::Specification</a> written out
for this gem is loadable upon installation.</p>
            

            
            <div class="method-source-code" id="ensure_loadable_spec-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 492</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_loadable_spec</span>
  <span class="ruby-identifier">ruby</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby_for_cache</span>
  <span class="ruby-identifier">ruby</span>.<span class="ruby-identifier">untaint</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">eval</span> <span class="ruby-identifier">ruby</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">StandardError</span>, <span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>,
          <span class="ruby-node">&quot;The specification for #{spec.full_name} is corrupt (#{e.class})&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ensure_loadable_spec-source -->
            
          </div>

          

          
        </div><!-- ensure_loadable_spec-method -->

      
        <div id="ensure_required_ruby_version_met-method" class="method-detail ">
          <a name="method-i-ensure_required_ruby_version_met"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_required_ruby_version_met</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="ensure_required_ruby_version_met-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 505</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_required_ruby_version_met</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rrv</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">required_ruby_version</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rrv</span>.<span class="ruby-identifier">satisfied_by?</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby_version</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;#{spec.name} requires Ruby version #{rrv}.&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ensure_required_ruby_version_met-source -->
            
          </div>

          

          
        </div><!-- ensure_required_ruby_version_met-method -->

      
        <div id="ensure_required_rubygems_version_met-method" class="method-detail ">
          <a name="method-i-ensure_required_rubygems_version_met"></a>

          
          <div class="method-heading">
            <span class="method-name">ensure_required_rubygems_version_met</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="ensure_required_rubygems_version_met-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 514</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_required_rubygems_version_met</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rrgv</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">required_rubygems_version</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rrgv</span>.<span class="ruby-identifier">satisfied_by?</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">rubygems_version</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>,
        <span class="ruby-node">&quot;#{spec.name} requires RubyGems version #{rrgv}. &quot;</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot;Try 'gem update --system' to update RubyGems itself.&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ensure_required_rubygems_version_met-source -->
            
          </div>

          

          
        </div><!-- ensure_required_rubygems_version_met-method -->

      
        <div id="extension_build_error-method" class="method-detail ">
          <a name="method-i-extension_build_error"></a>

          
          <div class="method-heading">
            <span class="method-name">extension_build_error</span><span
              class="method-args">(build_dir, output, backtrace = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Logs the build <tt>output</tt> in <tt>build_dir</tt>, then raises <a
href="Installer/ExtensionBuildError.html">ExtensionBuildError</a>.</p>
            

            
            <div class="method-source-code" id="extension_build_error-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 692</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extension_build_error</span>(<span class="ruby-identifier">build_dir</span>, <span class="ruby-identifier">output</span>, <span class="ruby-identifier">backtrace</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">gem_make_out</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">build_dir</span>, <span class="ruby-string">'gem_make.out'</span>

  <span class="ruby-identifier">open</span> <span class="ruby-identifier">gem_make_out</span>, <span class="ruby-string">'wb'</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">output</span> <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">message</span> = <span class="ruby-string">ERROR: Failed to build gem native extension.    #{output}Gem files will remain installed in #{gem_dir} for inspection.Results logged to #{gem_make_out}</span>

  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ExtensionBuildError</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">backtrace</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- extension_build_error-source -->
            
          </div>

          

          
        </div><!-- extension_build_error-method -->

      
        <div id="extract_files-method" class="method-detail ">
          <a name="method-i-extract_files"></a>

          
          <div class="method-heading">
            <span class="method-name">extract_files</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Reads the file index and extracts each file into the gem directory.</p>

<p>Ensures that files can’t be installed outside the gem directory.</p>
            

            
            <div class="method-source-code" id="extract_files-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 714</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extract_files</span>
  <span class="ruby-ivar">@package</span>.<span class="ruby-identifier">extract_files</span> <span class="ruby-identifier">gem_dir</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- extract_files-source -->
            
          </div>

          

          
        </div><!-- extract_files-method -->

      
        <div id="formatted_program_filename-method" class="method-detail ">
          <a name="method-i-formatted_program_filename"></a>

          
          <div class="method-heading">
            <span class="method-name">formatted_program_filename</span><span
              class="method-args">(filename)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Prefix and suffix the program filename the same as ruby.</p>
            

            
            <div class="method-source-code" id="formatted_program_filename-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 721</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@format_executable</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">exec_format</span> <span class="ruby-operator">%</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- formatted_program_filename-source -->
            
          </div>

          

          
        </div><!-- formatted_program_filename-method -->

      
        <div id="gem_dir-method" class="method-detail ">
          <a name="method-i-gem_dir"></a>

          
          <div class="method-heading">
            <span class="method-name">gem_dir</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Lazy accessor for the spec’s gem directory.</p>
            

            
            <div class="method-source-code" id="gem_dir-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gem_dir</span>
  <span class="ruby-ivar">@gem_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">gem_home</span>, <span class="ruby-string">&quot;gems&quot;</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_name</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- gem_dir-source -->
            
          </div>

          

          
        </div><!-- gem_dir-method -->

      
        <div id="generate_bin-method" class="method-detail ">
          <a name="method-i-generate_bin"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="generate_bin-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 355</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-ivar">@bin_dir</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-ivar">@bin_dir</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@bin_dir</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-ivar">@bin_dir</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">untaint</span>
    <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_dir</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">filename</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">bin_path</span> <span class="ruby-keyword">then</span>
      <span class="ruby-comment"># TODO change this to a more useful warning</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{bin_path} maybe `gem pristine #{spec.name}` will fix it?&quot;</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">mode</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">bin_path</span>).<span class="ruby-identifier">mode</span> <span class="ruby-operator">|</span> <span class="ruby-value">0111</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">bin_path</span>

    <span class="ruby-identifier">check_executable_overwrite</span> <span class="ruby-identifier">filename</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@wrappers</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">generate_bin_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-ivar">@bin_dir</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">generate_bin_symlink</span> <span class="ruby-identifier">filename</span>, <span class="ruby-ivar">@bin_dir</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_bin-source -->
            
          </div>

          

          
        </div><!-- generate_bin-method -->

      
        <div id="generate_bin_script-method" class="method-detail ">
          <a name="method-i-generate_bin_script"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin_script</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates the scripts to run the applications in the gem.</p>
            

            
            <div class="method-source-code" id="generate_bin_script-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin_script</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-identifier">bin_script_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_f</span> <span class="ruby-identifier">bin_script_path</span> <span class="ruby-comment"># prior install may have been --no-wrappers</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">bin_script_path</span>, <span class="ruby-string">'wb'</span>, <span class="ruby-value">0755</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">app_script_text</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">say</span> <span class="ruby-identifier">bin_script_path</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>

  <span class="ruby-identifier">generate_windows_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_bin_script-source -->
            
          </div>

          

          
        </div><!-- generate_bin_script-method -->

      
        <div id="generate_bin_symlink-method" class="method-detail ">
          <a name="method-i-generate_bin_symlink"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_bin_symlink</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates the symlinks to run the applications in the gem.  Moves the symlink
if the gem being installed has a newer version.</p>
            

            
            <div class="method-source-code" id="generate_bin_symlink-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 410</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bin_symlink</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">alert_warning</span> <span class="ruby-string">&quot;Unable to use symlinks on Windows, installing wrapper&quot;</span>
    <span class="ruby-identifier">generate_bin_script</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">src</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_dir</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">filename</span>
  <span class="ruby-identifier">dst</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">formatted_program_filename</span>(<span class="ruby-identifier">filename</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">dst</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span> <span class="ruby-identifier">dst</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">link</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">dst</span>).<span class="ruby-identifier">split</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">SEPARATOR</span>
      <span class="ruby-identifier">cur_version</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Version</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">link</span>[<span class="ruby-value">-3</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^.*-/</span>, <span class="ruby-string">''</span>))
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">cur_version</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">dst</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dst</span>, <span class="ruby-value">:verbose</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_bin_symlink-source -->
            
          </div>

          

          
        </div><!-- generate_bin_symlink-method -->

      
        <div id="generate_windows_script-method" class="method-detail ">
          <a name="method-i-generate_windows_script"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_windows_script</span><span
              class="method-args">(filename, bindir)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates windows .bat files for easy running of commands</p>
            

            
            <div class="method-source-code" id="generate_windows_script-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_windows_script</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">bindir</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">script_name</span> = <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.bat&quot;</span>
    <span class="ruby-identifier">script_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">bindir</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">script_name</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">script_path</span>, <span class="ruby-string">'w'</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">windows_stub_script</span>(<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">filename</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">say</span> <span class="ruby-identifier">script_path</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">really_verbose</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_windows_script-source -->
            
          </div>

          

          
        </div><!-- generate_windows_script-method -->

      
        <div id="install-method" class="method-detail ">
          <a name="method-i-install"></a>

          
          <div class="method-heading">
            <span class="method-name">install</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Installs the gem and returns a loaded <a
href="Specification.html">Gem::Specification</a> for the installed gem.</p>

<p>The gem will be installed with the following structure:</p>

<pre>@gem_home/
  cache/&lt;gem-version&gt;.gem #=&gt; a cached copy of the installed gem
  gems/&lt;gem-version&gt;/... #=&gt; extracted files
  specifications/&lt;gem-version&gt;.gemspec #=&gt; the Gem::Specification</pre>
            

            
            <div class="method-source-code" id="install-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install</span>
  <span class="ruby-identifier">pre_install_checks</span>

  <span class="ruby-identifier">run_pre_install_hooks</span>

  <span class="ruby-comment"># Completely remove any previous gem files</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">gem_dir</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">gem_dir</span>

  <span class="ruby-identifier">extract_files</span>

  <span class="ruby-identifier">build_extensions</span>
  <span class="ruby-identifier">write_build_info_file</span>
  <span class="ruby-identifier">run_post_build_hooks</span>

  <span class="ruby-identifier">generate_bin</span>
  <span class="ruby-identifier">write_spec</span>
  <span class="ruby-identifier">write_cache_file</span>

  <span class="ruby-identifier">say</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">post_install_message</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">post_install_message</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">loaded_from</span> = <span class="ruby-identifier">spec_file</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">add_spec</span> <span class="ruby-identifier">spec</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">spec</span>

  <span class="ruby-identifier">run_post_install_hooks</span>

  <span class="ruby-identifier">spec</span>

<span class="ruby-comment"># TODO This rescue is in the wrong place. What is raising this exception?</span>
<span class="ruby-comment"># move this rescue to around the code that actually might raise it.</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">GzipFile</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;gzip error installing #{gem}&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- install-source -->
            
          </div>

          

          
        </div><!-- install-method -->

      
        <div id="installation_satisfies_dependency-3F-method" class="method-detail ">
          <a name="method-i-installation_satisfies_dependency-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">installation_satisfies_dependency?</span><span
              class="method-args">(dependency)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>True if the gems in the system satisfy <tt>dependency</tt>.</p>
            

            
            <div class="method-source-code" id="installation_satisfies_dependency-3F-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">installation_satisfies_dependency?</span>(<span class="ruby-identifier">dependency</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">installed_specs</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">matches_spec?</span> <span class="ruby-identifier">s</span> }
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@only_install_dir</span>
  <span class="ruby-keyword">not</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">matching_specs</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- installation_satisfies_dependency-3F-source -->
            
          </div>

          

          
        </div><!-- installation_satisfies_dependency-3F-method -->

      
        <div id="installed_specs-method" class="method-detail ">
          <a name="method-i-installed_specs"></a>

          
          <div class="method-heading">
            <span class="method-name">installed_specs</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return an Array of Specifications contained within the <a
href="Installer.html#attribute-i-gem_home">gem_home</a> we’ll be installing
into.</p>
            

            
            <div class="method-source-code" id="installed_specs-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">installed_specs</span>
  <span class="ruby-ivar">@specs</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">specs</span> = []

    <span class="ruby-constant">Dir</span>[<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">gem_home</span>, <span class="ruby-string">&quot;specifications&quot;</span>, <span class="ruby-string">&quot;*.gemspec&quot;</span>)].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">load</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">untaint</span>
      <span class="ruby-identifier">specs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">specs</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- installed_specs-source -->
            
          </div>

          

          
        </div><!-- installed_specs-method -->

      
        <div id="pre_install_checks-method" class="method-detail ">
          <a name="method-i-pre_install_checks"></a>

          
          <div class="method-heading">
            <span class="method-name">pre_install_checks</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Performs various checks before installing the gem such as the install
repository is writable and its directories exist, required ruby and
rubygems versions are met and that dependencies are installed.</p>

<p><a href="Version.html">Version</a> and dependency checks are skipped if
this install is forced.</p>

<p>The dependent check will be skipped this install is ignoring dependencies.</p>
            

            
            <div class="method-source-code" id="pre_install_checks-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 748</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pre_install_checks</span>
  <span class="ruby-identifier">verify_gem_home</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:unpack</span>]

  <span class="ruby-comment"># If we're forcing the install then disable security unless the security</span>
  <span class="ruby-comment"># policy says that we only install signed gems.</span>
  <span class="ruby-ivar">@security_policy</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span>
    <span class="ruby-ivar">@force</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@security_policy</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@security_policy</span>.<span class="ruby-identifier">only_signed</span>

  <span class="ruby-identifier">ensure_loadable_spec</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ensure_gem_subdirectories</span> <span class="ruby-identifier">gem_home</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@force</span>

  <span class="ruby-identifier">ensure_required_ruby_version_met</span>
  <span class="ruby-identifier">ensure_required_rubygems_version_met</span>
  <span class="ruby-identifier">ensure_dependencies_met</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@ignore_dependencies</span>

  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- pre_install_checks-source -->
            
          </div>

          

          
        </div><!-- pre_install_checks-method -->

      
        <div id="process_options-method" class="method-detail ">
          <a name="method-i-process_options"></a>

          
          <div class="method-heading">
            <span class="method-name">process_options</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="process_options-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 535</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_options</span>
  <span class="ruby-ivar">@options</span> = {
    <span class="ruby-value">:bin_dir</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,
    <span class="ruby-value">:env_shebang</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:force</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
    <span class="ruby-value">:install_dir</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">dir</span>,
    <span class="ruby-value">:only_install_dir</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>
  }.<span class="ruby-identifier">merge</span> <span class="ruby-identifier">options</span>

  <span class="ruby-ivar">@env_shebang</span>         = <span class="ruby-identifier">options</span>[<span class="ruby-value">:env_shebang</span>]
  <span class="ruby-ivar">@force</span>               = <span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
  <span class="ruby-ivar">@gem_home</span>            = <span class="ruby-identifier">options</span>[<span class="ruby-value">:install_dir</span>]
  <span class="ruby-ivar">@ignore_dependencies</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:ignore_dependencies</span>]
  <span class="ruby-ivar">@format_executable</span>   = <span class="ruby-identifier">options</span>[<span class="ruby-value">:format_executable</span>]
  <span class="ruby-ivar">@security_policy</span>     = <span class="ruby-identifier">options</span>[<span class="ruby-value">:security_policy</span>]
  <span class="ruby-ivar">@wrappers</span>            = <span class="ruby-identifier">options</span>[<span class="ruby-value">:wrappers</span>]
  <span class="ruby-ivar">@only_install_dir</span>    = <span class="ruby-identifier">options</span>[<span class="ruby-value">:only_install_dir</span>]

  <span class="ruby-comment"># If the user has asked for the gem to be installed in a directory that is</span>
  <span class="ruby-comment"># the system gem directory, then use the system bin directory, else create</span>
  <span class="ruby-comment"># (or use) a new bin dir under the gem_home.</span>
  <span class="ruby-ivar">@bin_dir</span>             = <span class="ruby-identifier">options</span>[<span class="ruby-value">:bin_dir</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">bindir</span>(<span class="ruby-identifier">gem_home</span>)
  <span class="ruby-ivar">@development</span>         = <span class="ruby-identifier">options</span>[<span class="ruby-value">:development</span>]

  <span class="ruby-ivar">@build_args</span>          = <span class="ruby-identifier">options</span>[<span class="ruby-value">:build_args</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Command</span>.<span class="ruby-identifier">build_args</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- process_options-source -->
            
          </div>

          

          
        </div><!-- process_options-method -->

      
        <div id="shebang-method" class="method-detail ">
          <a name="method-i-shebang"></a>

          
          <div class="method-heading">
            <span class="method-name">shebang</span><span
              class="method-args">(bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Generates a #! line for <tt>bin_file_name</tt>‘s wrapper copying arguments
if necessary.</p>

<p>If the :custom_shebang config is set, then it is used as a template for how
to create the shebang used for to run a gem’s executables.</p>

<p>The template supports 4 expansions:</p>

<pre>$env    the path to the unix env utility
$ruby   the path to the currently running ruby interpreter
$exec   the path to the gem's executable
$name   the name of the gem the executable is for</pre>
            

            
            <div class="method-source-code" id="shebang-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 447</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">shebang</span>(<span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-identifier">ruby_name</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigMap</span>[<span class="ruby-value">:ruby_install_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@env_shebang</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_dir</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">bin_file_name</span>
  <span class="ruby-identifier">first_line</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&quot;rb&quot;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>}

  <span class="ruby-keyword">if</span> <span class="ruby-node">/\A#!/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">first_line</span> <span class="ruby-keyword">then</span>
    <span class="ruby-comment"># Preserve extra words on shebang line, like &quot;-w&quot;.  Thanks RPA.</span>
    <span class="ruby-identifier">shebang</span> = <span class="ruby-identifier">first_line</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/\A\#!.*?ruby\S*((\s+\S+)+)/</span>, <span class="ruby-node">&quot;#!#{Gem.ruby}&quot;</span>)
    <span class="ruby-identifier">opts</span> = <span class="ruby-node">$1</span>
    <span class="ruby-identifier">shebang</span>.<span class="ruby-identifier">strip!</span> <span class="ruby-comment"># Avoid nasty ^M issues.</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">which</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>[<span class="ruby-value">:custom_shebang</span>]
    <span class="ruby-comment"># replace bin_file_name with &quot;ruby&quot; to avoid endless loops</span>
    <span class="ruby-identifier">which</span> = <span class="ruby-identifier">which</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/ #{bin_file_name}$/</span>,<span class="ruby-node">&quot; #{Gem::ConfigMap[:ruby_install_name]}&quot;</span>)

    <span class="ruby-identifier">which</span> = <span class="ruby-identifier">which</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\$(\w+)/</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">case</span> <span class="ruby-node">$1</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;env&quot;</span>
        <span class="ruby-ivar">@env_path</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ENV_PATHS</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">env_path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span> <span class="ruby-identifier">env_path</span> }
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ruby&quot;</span>
        <span class="ruby-node">&quot;#{Gem.ruby}#{opts}&quot;</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;exec&quot;</span>
        <span class="ruby-identifier">bin_file_name</span>
      <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;name&quot;</span>
        <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-node">&quot;#!#{which}&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">ruby_name</span> <span class="ruby-keyword">then</span>
    <span class="ruby-node">&quot;#!#{Gem.ruby}#{opts}&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span> <span class="ruby-keyword">then</span>
    <span class="ruby-node">&quot;#!/bin/sh\n'exec' #{ruby_name.dump} '-x' \&quot;$0\&quot; \&quot;$@\&quot;\n#{shebang}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Create a plain shebang line.</span>
    <span class="ruby-ivar">@env_path</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ENV_PATHS</span>.<span class="ruby-identifier">find</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">env_path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span> <span class="ruby-identifier">env_path</span> }
    <span class="ruby-node">&quot;#!#{@env_path} #{ruby_name}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- shebang-source -->
            
          </div>

          

          
        </div><!-- shebang-method -->

      
        <div id="spec-method" class="method-detail ">
          <a name="method-i-spec"></a>

          
          <div class="method-heading">
            <span class="method-name">spec</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Lazy accessor for the installer’s spec.</p>
            

            
            <div class="method-source-code" id="spec-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spec</span>
  <span class="ruby-ivar">@spec</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@package</span>.<span class="ruby-identifier">spec</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Package</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-node">&quot;invalid gem: #{e.message}&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- spec-source -->
            
          </div>

          

          
        </div><!-- spec-method -->

      
        <div id="spec_file-method" class="method-detail ">
          <a name="method-i-spec_file"></a>

          
          <div class="method-heading">
            <span class="method-name">spec_file</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>The location of of the spec file that is installed.</p>
            

            
            <div class="method-source-code" id="spec_file-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 325</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spec_file</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_home</span>, <span class="ruby-string">&quot;specifications&quot;</span>, <span class="ruby-node">&quot;#{spec.full_name}.gemspec&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- spec_file-source -->
            
          </div>

          

          
        </div><!-- spec_file-method -->

      
        <div id="unpack-method" class="method-detail ">
          <a name="method-i-unpack"></a>

          
          <div class="method-heading">
            <span class="method-name">unpack</span><span
              class="method-args">(directory)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Unpacks the gem into the given directory.</p>
            

            
            <div class="method-source-code" id="unpack-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpack</span>(<span class="ruby-identifier">directory</span>)
  <span class="ruby-ivar">@gem_dir</span> = <span class="ruby-identifier">directory</span>
  <span class="ruby-identifier">extract_files</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- unpack-source -->
            
          </div>

          

          
        </div><!-- unpack-method -->

      
        <div id="verify_gem_home-method" class="method-detail ">
          <a name="method-i-verify_gem_home"></a>

          
          <div class="method-heading">
            <span class="method-name">verify_gem_home</span><span
              class="method-args">(unpack = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>DOC: Missing docs or :nodoc:.</p>
            

            
            <div class="method-source-code" id="verify_gem_home-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 583</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verify_gem_home</span>(<span class="ruby-identifier">unpack</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">gem_home</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FilePermissionError</span>, <span class="ruby-identifier">gem_home</span> <span class="ruby-keyword">unless</span>
    <span class="ruby-identifier">unpack</span> <span class="ruby-keyword">or</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">writable?</span>(<span class="ruby-identifier">gem_home</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- verify_gem_home-source -->
            
          </div>

          

          
        </div><!-- verify_gem_home-method -->

      
        <div id="windows_stub_script-method" class="method-detail ">
          <a name="method-i-windows_stub_script"></a>

          
          <div class="method-heading">
            <span class="method-name">windows_stub_script</span><span
              class="method-args">(bindir, bin_file_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>return the stub script text used to launch the true ruby script</p>
            

            
            <div class="method-source-code" id="windows_stub_script-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 623</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">windows_stub_script</span>(<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">bin_file_name</span>)
  <span class="ruby-identifier">ruby</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span>).<span class="ruby-identifier">chomp</span>(<span class="ruby-string">'&quot;'</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">@ECHO OFFIF NOT &quot;%~f0&quot; == &quot;~f0&quot; GOTO :WinNT@&quot;#{ruby}&quot; &quot;#{File.join(bindir, bin_file_name)}&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9GOTO :EOF:WinNT@&quot;#{ruby}&quot; &quot;%~dpn0&quot; %*</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- windows_stub_script-source -->
            
          </div>

          

          
        </div><!-- windows_stub_script-method -->

      
        <div id="write_build_info_file-method" class="method-detail ">
          <a name="method-i-write_build_info_file"></a>

          
          <div class="method-heading">
            <span class="method-name">write_build_info_file</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Writes the file containing the arguments for building this gem’s
extensions.</p>
            

            
            <div class="method-source-code" id="write_build_info_file-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 773</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_build_info_file</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@build_args</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">open</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">build_info_file</span>, <span class="ruby-string">'w'</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@build_args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">io</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">arg</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- write_build_info_file-source -->
            
          </div>

          

          
        </div><!-- write_build_info_file-method -->

      
        <div id="write_cache_file-method" class="method-detail ">
          <a name="method-i-write_cache_file"></a>

          
          <div class="method-heading">
            <span class="method-name">write_cache_file</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Writes the .gem file to the cache directory</p>
            

            
            <div class="method-source-code" id="write_cache_file-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_cache_file</span>
  <span class="ruby-identifier">cache_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">gem_home</span>, <span class="ruby-string">'cache'</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">file_name</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span> <span class="ruby-ivar">@gem</span>, <span class="ruby-identifier">cache_file</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">cache_file</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- write_cache_file-source -->
            
          </div>

          

          
        </div><!-- write_cache_file-method -->

      
        <div id="write_spec-method" class="method-detail ">
          <a name="method-i-write_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">write_spec</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Writes the .gemspec specification (in Ruby) to the gem home’s
specifications directory.</p>
            

            
            <div class="method-source-code" id="write_spec-source">
<pre>
<span class="ruby-comment"># File lib/rubygems/installer.rb, line 333</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_spec</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">spec_file</span>, <span class="ruby-string">&quot;w&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby_for_cache</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- write_spec-source -->
            
          </div>

          

          
        </div><!-- write_spec-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

